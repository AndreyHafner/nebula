<?xml version="1.0" encoding="UTF-8"?>
<project name="org.eclipse.nebula.widgets.grid" default="doitall" basedir=".">

<target name="doitall">
	<antcall target="pdebuild"/>
	<antcall target="javadoc"/>
	<antcall target="snippets"/>
	<antcall target="zip"/>
	<antcall target="sftp"/>	
</target>

<target name="pdebuild">
	<pde.exportPlugins plugins="org.eclipse.nebula.widgets.grid" destination="." exportType="directory" useJARFormat="true" exportSource="true"/>
</target>

<target name="javadoc"> 
	<javadoc destdir="javadoc" packagenames="org.eclipse.nebula.widgets.grid.*" excludepackagenames=
	    "org.eclipse.nebula.widgets.grid.internal.*" sourcepath="src"/> 
</target>

<target name="snippets">
	<cvs cvsRoot=":pserver:anonymous@dev.eclipse.org:/cvsroot/technology"
	       package="org.eclipse.swt.nebula/org.eclipse.swt.nebula.snippets/src/org/eclipse/swt/nebula/snippets/grid"
	       dest="snippets"
	  />
	  
	  <copy todir="snippets">
		  <fileset dir="snippets\org.eclipse.swt.nebula\org.eclipse.swt.nebula.snippets\src\org\eclipse\swt\nebula\snippets\grid"/>
	  </copy>
	  
	  <delete dir="snippets\org.eclipse.swt.nebula"/>
</target>


<target name="zip">
	<tstamp/>
	<zip destfile="grid_1.0_ALPHA_NIGHTLY.zip">
		<zipfileset dir="src" prefix="src"/>
		<zipfileset dir="javadoc" prefix="javadoc"/>
		<zipfileset dir="snippets" prefix="snippets"/>
		<zipfileset dir="." includes="plugins/org.eclipse.nebula.widgets.grid_1.0.0.jar"/>
	</zip>

</target>

<target name="sftp">

	<tstamp/>
	
	<sshexec host="download1.eclipse.org" username="cgross" password="${password}" trust="yes" failonerror="no" command="mkdir downloads/technology/nebula/${DSTAMP}" />

	<scp trust="yes" file="grid_1.0_ALPHA_NIGHTLY.zip" todir="cgross:${password}@download1.eclipse.org:downloads/technology/nebula/${DSTAMP}/"/>
	<scp trust="yes" file="grid_1.0_ALPHA_NIGHTLY.zip" todir="cgross:${password}@download1.eclipse.org:downloads/technology/nebula/"/>
</target>



</project>